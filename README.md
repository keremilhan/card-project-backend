# Card Project Backend

## Overview

This backend is designed for an app-store-like system where you can list, filter, and manage "tiles" (application cards). It uses FastAPI and async SQLAlchemy with PostgreSQL, and is organized for easy development and deployment.

### Features

- Lists all available tiles from a static JSON file.
- Lets you install or uninstall tiles, tracking their status in the database.
- All database and API operations are asynchronous for better performance.
- API responses are minimal and only include data needed by the frontend.
- Everything runs in Docker containers for simple setup.

## Tech Stack

- FastAPI (async Python web framework)
- SQLAlchemy (async ORM for PostgreSQL)
- PostgreSQL (database)
- Docker & Docker Compose
- Pydantic v2 (data validation and settings)

## Project Structure

```
card-project-backend/
├── app/
│   ├── api/           # API routes
│   ├── db/            # Database models and session
│   ├── schemas/       # Pydantic models
│   ├── static/        # Static files (tiles.json)
│   └── main.py        # FastAPI app entrypoint
├── Dockerfile
├── docker-compose.yml
├── requirements.txt
└── README.md
```

## API Endpoints

- `GET /tiles`  
  Returns all tiles, including their installed status.

- `POST /tiles/install`  
  Installs a tile. Returns `{ "_id": <tile_id>, "installed": true }`.

- `DELETE /tiles/{tile_id}`  
  Uninstalls a tile. Returns `{ "_id": <tile_id>, "installed": false }`. Returns 404 if the tile is not installed.

## How to Run

### Prerequisites

- Docker
- Docker Compose

### Steps

1. Clone the repository:
   ```sh
   git clone <repo-url>
   cd card-project-backend
   ```

2. Build and start the containers:
   ```sh
   docker-compose up --build -d
   ```

3. Create the database tables:
   ```sh
   docker-compose exec backend python app/db/create_tables.py
   ```

4. Open the API docs in your browser:
   - [http://localhost:8000/docs](http://localhost:8000/docs) (Swagger UI, auto-generated by FastAPI and Pydantic)

### Database Info

- PostgreSQL runs in a container at `localhost:5433`
  - User: `carduser`
  - Password: `cardpass`
  - Database: `carddb`

## Notes

- All API and database operations are async, so the backend can handle multiple requests at once.
- Tile data comes from `app/static/tiles.json`.
- Installed tiles are tracked in the `installed_tiles` table.
- CORS is enabled for all origins by default.
- The API docs are available at `/docs` thanks to FastAPI and Pydantic.